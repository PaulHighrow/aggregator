{"version":3,"file":"static/js/My AP Page.b9f11f86.chunk.js","mappings":"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","sources":["pages/MyAP/My Platform/MyPlatform.styled.js","pages/MyAP/My Platform/MyPlatform.jsx","pages/MyAP/MyAP.jsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const MyPlatformBox = styled.div`\n  height: 100vh;\n  width: 100vw;\n\n  overflow: hidden;\n\n  background-color: white;\n  position: absolute;\n  border-radius: 20px;\n  top: 0;\n  left: 0;\n\n  font-family: var(--streams-font-family);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(-100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n`;","import { MyPlatformBox } from './MyPlatform.styled';\n\nexport const MyPlatform = () => {\n  return (\n    <>\n      <MyPlatformBox>\n        <iframe\n          id=\"platform-window\"\n          title=\"platform-pin\"\n          src=\"https://online.ap.education/school/\"\n          width=\"100%\"\n          height=\"100%\"\n        ></iframe>\n      </MyPlatformBox>\n    </>\n  );\n};\n","import axios from 'axios';\nimport { Label } from 'components/LeadForm/LeadForm.styled';\nimport { StreamPlaceHolderText, StreamSection } from 'components/Stream/Stream.styled';\nimport { Formik } from 'formik';\nimport {\n  AdminFormBtn,\n  AdminInput,\n  AdminInputNote,\n  LoginForm,\n} from 'pages/Streams/AdminPanel/AdminPanel.styled';\nimport { useEffect, useState } from 'react';\nimport * as yup from 'yup';\nimport { MyPlatform } from './My Platform/MyPlatform';\n\nconst MyAP = () => {\n  const [isUserLogged, setIsUserLogged] = useState(false);\n  axios.defaults.baseURL = 'https://aggregator-server.onrender.com';\n\n  useEffect(() => {\n    document.title = 'My AP | AP Education';\n\n    const refreshToken = async () => {\n      console.log('token refresher');\n      try {\n        const res = await axios.post('/users/refresh', {\n          mail: localStorage.getItem('mail'),\n        });\n        setIsUserLogged(isLogged => (isLogged = true));\n        console.log(res);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    refreshToken();\n  });\n\n  const setAuthToken = token => {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  };\n\n  const initialLoginValues = {\n    mail: '',\n    password: '',\n  };\n\n  const loginSchema = yup.object().shape({\n    mail: yup\n      .string()\n      .required('Вкажіть пошту, за якою ви зареєстровані на нашій платформі!'),\n    password: yup\n      .string()\n      .required(\n        'Введіть пароль, який ви використовуєте для входу на нашу платформу!'\n      ),\n  });\n\n  const handleLoginSubmit = async (values, { resetForm }) => {\n    console.log(isUserLogged);\n    try {\n      const response = await axios.post('/users/login', values);\n      console.log(values);\n      console.log(response);\n      setAuthToken(response.data.token);\n      setIsUserLogged(isLogged => (isLogged = true));\n      localStorage.setItem('mail', values.mail);\n      resetForm();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <StreamSection>\n      {!isUserLogged ? (\n        <Formik\n          initialValues={initialLoginValues}\n          onSubmit={handleLoginSubmit}\n          validationSchema={loginSchema}\n        >\n          <LoginForm>\n            <StreamPlaceHolderText>\n              Привіт! Ця сторінка недоступна для неавторизованих користувачів.\n              Але якщо ви маєте доступ до нашої платформи, то й до цієї сторінки\n              теж. Введіть дані, які ви використовуєте для входу на платформу.\n            </StreamPlaceHolderText>\n            <Label>\n              <AdminInput type=\"text\" name=\"mail\" placeholder=\"Login\" />\n              <AdminInputNote component=\"p\" name=\"mail\" type=\"email\" />\n            </Label>\n            <Label>\n              <AdminInput\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n              />\n              <AdminInputNote component=\"p\" name=\"password\" />\n            </Label>\n            <AdminFormBtn type=\"submit\">Увійти</AdminFormBtn>\n          </LoginForm>\n        </Formik>\n      ) : (\n        <>\n          <MyPlatform />\n        </>\n      )}\n    </StreamSection>\n  );\n};\n\nexport default MyAP;\n"],"names":["MyPlatformBox","styled","_templateObject","_taggedTemplateLiteral","MyPlatform","_jsx","_Fragment","children","id","title","src","width","height","_useState","useState","_useState2","_slicedToArray","isUserLogged","setIsUserLogged","axios","useEffect","document","refreshToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_context","prev","next","console","log","mail","localStorage","getItem","sent","isLogged","t0","stop","apply","arguments","loginSchema","yup","shape","required","password","handleLoginSubmit","_ref3","_callee2","values","_ref2","resetForm","response","_context2","token","data","concat","setItem","error","_x","_x2","StreamSection","Formik","initialValues","onSubmit","validationSchema","_jsxs","LoginForm","StreamPlaceHolderText","Label","AdminInput","type","name","placeholder","AdminInputNote","component","AdminFormBtn"],"sourceRoot":""}