"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[473],{6474:function(e,t,n){n.r(t);var r=n(3433),s=n(4165),a=n(5861),c=n(9439),u=n(1488),o=n(5294),i=n(2605),l=n(8313),d=n(610),h=n(9527),f=n(1679),p=n(5984),x=n(2791),m=n(6710),v=n(1608),Z=n(9901),g=n(2195),j=n(2277),w=n(184);o.Z.defaults.baseURL="https://aggregator-server.onrender.com";t.default=function(){var e=(0,x.useState)(!1),t=(0,c.Z)(e,2),n=t[0],k=t[1],y=(0,x.useState)(!1),S=(0,c.Z)(y,2),b=S[0],C=S[1],_=(0,x.useState)(!1),D=(0,c.Z)(_,2),O=D[0],N=D[1],I=(0,x.useState)(""),W=(0,c.Z)(I,2),L=W[0],R=W[1],z=(0,x.useState)(!1),F=(0,c.Z)(z,2),Y=F[0],A=F[1],K=(0,x.useState)(""),q=(0,c.Z)(K,2),B=q[0],E=q[1],H=(0,x.useRef)(),P=(0,u.Z)(H),J=(0,c.Z)(P,2),M=J[0],U=(J[1],(0,u.Z)(document.body)),Q=(0,c.Z)(U,2),V=Q[0],$=Q[1],G=(0,x.useState)(!1),T=(0,c.Z)(G,2),X=T[0],ee=T[1],te=(0,x.useState)({}),ne=(0,c.Z)(te,2),re=ne[0],se=ne[1],ae=(0,x.useState)(""),ce=(0,c.Z)(ae,2),ue=ce[0],oe=ce[1],ie=(0,x.useState)(""),le=(0,c.Z)(ie,2),de=(le[0],le[1]),he=(0,x.useState)(!1),fe=(0,c.Z)(he,2),pe=fe[0],xe=fe[1],me=(0,x.useState)([]),ve=(0,c.Z)(me,2),Ze=ve[0],ge=ve[1],je=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("/");case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,x.useLayoutEffect)((function(){je();var e=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ee((function(e){return!0})),e.t0=se,e.next=5,o.Z.get("/links");case 5:e.t1=e.sent.data,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(0),console.log(e.t2);case 12:return e.prev=12,ee((function(e){return!1})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var we=function(e){C((function(e){return!e})),R(n||O?function(e){return"kahoot"}:function(e){return""})},ke=0===M&&V>$?V-300:V-M,ye=function(e){e.preventDefault();var t=(0,p.x0)(8);de((function(e){return t})),localStorage.setItem("userName",ue.trim()),localStorage.setItem("userID",t),xe((function(e){return!e}))},Se=(0,x.useRef)(null);return(0,x.useEffect)((function(){document.title="B1 Speaking Club | AP Education",Se.current=(0,v.io)("https://ap-chat.onrender.com/"),function(e){var t=localStorage.getItem("userName");localStorage.getItem("userID")&&t&&xe((function(e){return!0}))}(),Se.current.on("connected",(function(e,t){console.log(e),console.log(t)}));var e=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("https://ap-chat.onrender.com/messages");case 3:t=e.sent,n=t.data.filter((function(e){return new Date(e.createdAt).getDate()===(new Date).getDate()})),ge((function(e){return n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return e(),Se.current.on("message",function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.post("https://ap-chat.onrender.com/messages",t);case 3:ge((function(e){return[].concat((0,r.Z)(e),[t])})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),e.next=3,n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se.current.on("message:get",function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge((function(e){return[].concat((0,r.Z)(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){Se.current.off("connected"),Se.current.off("message"),Se.current.disconnect()}}),[]),(0,w.jsx)(w.Fragment,{children:(void 0===re.trials_de||re.trials_de[0]<10)&&!X?(0,w.jsx)(j.r,{children:(0,w.jsxs)(j.Rq,{children:["\u041f\u043e\u043a\u0438 \u0449\u043e \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0456\u0457 \u0442\u0443\u0442 \u043d\u0435\u043c\u0430\u0454! ",(0,w.jsx)("br",{}),"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435, \u0447\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0438 \u0432\u043a\u0430\u0437\u0430\u043b\u0438 \u0430\u0434\u0440\u0435\u0441\u0443 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \u0430\u0431\u043e \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0456\u0437\u043d\u0456\u0448\u0435."]})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(j.QU,{style:{width:n&&V>$?"".concat(ke,"px"):"100%"},children:(0,w.jsxs)(i.C,{children:[X&&(0,w.jsx)(d.s,{children:(0,w.jsx)(l.a,{})}),(0,w.jsxs)(j.c6,{children:[(0,w.jsx)(j.i1,{}),(0,w.jsx)(j.tW,{}),(0,w.jsx)(j.Rs,{className:Y&&"sound"===B||Y&&"live"===B?"animated":"",children:(0,w.jsx)(j.CO,{className:Y&&"sound"===B||Y&&"live"===B?"animated":""})}),(0,w.jsx)(j.$D,{className:Y&&"quality"===B?"animated":"",children:(0,w.jsx)(j.hY,{className:Y&&"quality"===B?"animated":""})}),(0,w.jsx)(m.Z,{playing:!0,muted:!0,controls:!0,config:{youtube:{playerVars:{rel:0}}},style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100vh",url:re.trials_de})]}),(0,w.jsxs)(j.KN,{children:[(0,w.jsx)(j.kd,{onClick:we,className:Y&&"kahoot_open"===B?"animated":"",children:(0,w.jsx)(j.ev,{})}),(0,w.jsx)(j.Ms,{onClick:function(){k((function(e){return!e})),R(b||O?function(e){return"chat"}:function(e){return""})},className:Y&&"chat_open"===B?"animated":"",children:(0,w.jsx)(j.DS,{})}),(0,w.jsx)(j.wH,{onClick:function(){N((function(e){return!e})),E(""),R(b||n?function(e){return"support"}:function(e){return""})},children:(0,w.jsx)(j.RB,{})})]}),!re.trials_de||re.trials_de.includes("youtube")||re.trials_de.includes("youtu.be")?null:window.location.replace("https://us06web.zoom.us/j/82820194872?pwd=5Y0Hy0Y8dFJcW8fWwZDfv0C2w8SJlO.1#success"),$>V&&(0,w.jsx)(j.rW,{ref:H,className:n?"shown":"hidden",style:"chat"===L?{zIndex:"2"}:{zIndex:"1"},children:pe?(0,w.jsx)(Z.e,{socket:Se.current,messages:Ze,isChatOpen:n}):(0,w.jsxs)(g._Y,{onSubmit:ye,children:[(0,w.jsx)(g.mD,{children:"AP Open Chat"}),(0,w.jsx)(g.bt,{htmlFor:"username",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f \u0442\u0430 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e"}),(0,w.jsx)(g._8,{type:"text",minLength:3,name:"username",id:"username",value:ue,onChange:function(e){return oe(e.target.value)}}),(0,w.jsx)(g.bh,{children:"\u0413\u043e\u0442\u043e\u0432\u043e!"})]})}),(0,w.jsx)(h.M,{sectionWidth:V,sectionHeight:$,isKahootOpen:b,isChatOpen:n,isOpenedLast:L}),(0,w.jsx)(f.B,{sectionWidth:V,isSupportOpen:O,isOpenedLast:L,handleSupport:function(e){E((function(t){return e})),Y||A((function(e){return!e}))},openKahoot:we,isKahootOpen:b})]})}),V>=$&&(0,w.jsx)(j.rW,{ref:H,className:n?"shown":"hidden",style:"chat"===L?{zIndex:"2"}:{zIndex:"1"},children:pe?(0,w.jsx)(Z.e,{socket:Se.current,messages:Ze,isChatOpen:n}):(0,w.jsxs)(g._Y,{onSubmit:ye,children:[(0,w.jsx)(g.mD,{children:"AP Open Chat"}),(0,w.jsx)(g.bt,{htmlFor:"username",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f \u0442\u0430 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e"}),(0,w.jsx)(g._8,{type:"text",minLength:3,name:"username",id:"username",value:ue,onChange:function(e){return oe(e.target.value)}}),(0,w.jsx)(g.bh,{children:"\u0413\u043e\u0442\u043e\u0432\u043e!"})]})})]})})}}}]);
//# sourceMappingURL=B1 Speaking pilot page.d07cb8cb.chunk.js.map